@page "/meals"
@using CorporateWellness.Components;
@using Microsoft.FluentUI.AspNetCore.Components


<FluentGrid Style="background-color: var(--neutral-layer-3); padding: 4px; ">
    <FluentGridItem xs="12" Justify="JustifyContent.FlexEnd">
        <FluentSearch AriaLabel="Search" />
        &nbsp;
        <FluentButton>New Meal</FluentButton>
        &nbsp;
        <FluentButton>AI Suggestion</FluentButton>
    </FluentGridItem>
    <FluentGridItem xs="12">
        <FluentDataGrid Items="@userMeals">
            <TemplateColumn Width="30px" Align="Align.Center">
                <input type="checkbox" @onchange="@(() => OnCheckboxChanged(context))" />
            </TemplateColumn>
            @* <PropertyColumn Property="@(p => p.Id)" Sortable="true" /> *@
            <PropertyColumn Property="@(p => p.Name)" Sortable="true" />
            <PropertyColumn Property="@(p => p.Consumption)" Sortable="true" />
            <PropertyColumn Property="@(p => p.Calories)" Sortable="false" />
            <PropertyColumn Property="@(p => p.Features)" Sortable="false" />
            <PropertyColumn Property="@(p => p.Source)" Sortable="false" />
        </FluentDataGrid>
    </FluentGridItem>
</FluentGrid>


@code {
    string message = string.Empty;

    record userMeal(int Id, string Name, string Consumption, int Calories, string Features, string Source);

    IQueryable<userMeal> userMeals = new[]
    {
        new userMeal(1, "Overnight oats with berries", "Breakfast (7AM-9AM)",300,"High in fiber, rich in antioxidants","AI Suggested"),
        new userMeal(2, "Grilled chicken salad", "Lunch (12PM-2PM)",450,"High protein, low fat","Manual"),
        new userMeal(3, "Hummus with veggie sticks", "Snack (3PM-4PM)",200,"Low calorie, nutrient-dense","AI Suggested"),
        new userMeal(4, "Quinoa bowl with avocado", "Dinner (5PM-7PM)",500,"Rich in healthy fats, high in protein","AI Suggested")
    }.AsQueryable();

    void OnCheckboxChanged(userMeal curr)
    {
        message = $"Checkbox for Meal Id {curr.Id} changed";
    }
}